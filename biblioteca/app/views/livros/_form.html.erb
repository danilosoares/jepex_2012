<%= form_for(@livro) do |f| %>
  <% if @livro.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@livro.errors.count, "error") %> prohibited this livro from being saved:</h2>

      <ul>
      <% @livro.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :categoria %><br />
    <%= collection_select(:livro, :categoria_id, Categoria.order(:nome), :id, :nome, {:prompt => true}) %><br />
  </div>
  <div class="field">
   <%= f.label :editora %><br />
   <%= collection_select(:livro, :editora_id, Editora.order(:nome), :id, :nome, {:prompt => true}) %><br/>
  </div>
  <div class="field">
    <p>Autores<br/>
    <% Autor.find(:all).each do |autor| %>
      <%= check_box_tag 'livro[autores][]',autor.id, @livro.autores.include?(autor)%><%= autor.nome %><br/>
    <% end %>
  </div>
  <div class="field">
    <%= f.label :titulo %><br />
    <%= f.text_field :titulo %>
  </div>
  <div class="field">
    <%= f.label :paginas %><br />
    <%= f.number_field :paginas %>
  </div>
  <div class="field">
    <%= f.label :ano %><br />
    <%= f.number_field :ano %>
  </div>
  <div class="field">
    <%= f.label :issn %><br />
    <%= f.text_field :issn %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
